<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#1e3a8a">
    <title>рд╢рддрд░рдВрдЬ рдЧреЗрдо - PWA</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="apple-touch-icon" href="icons/icon-192.png">
</head>
<body>
    <div class="container">
        <header>
            <h1>тЩФ рд╢рддрд░рдВрдЬ рдЧреЗрдо тЩЪ</h1>
            <p class="subtitle">рдкреВрд░реНрдг рдСрдлрд▓рд╛рдЗрди PWA - рдЪрд╛рдЗрдирд╛ рддрдХрдиреАрдХ рд╕реЗ рдмрдирд╛</p>
        </header>

        <div class="game-controls">
            <div class="game-info">
                <div id="turn-indicator" class="turn white-turn">
                    <span id="turn-text">рд╢реНрд╡реЗрдд рдХреА рдмрд╛рд░реА</span>
                </div>
                <div id="game-status" class="status">рдЦреЗрд▓ рд╢реБрд░реВ рдХрд░реЗрдВ</div>
            </div>

            <div class="buttons">
                <button id="new-game" class="btn btn-primary">рдирдпрд╛ рдЦреЗрд▓</button>
                <button id="undo-move" class="btn btn-secondary">рдкрд┐рдЫрд▓реА рдЪрд╛рд▓</button>
                <button id="reset-game" class="btn btn-danger">рд░рд┐рд╕реЗрдЯ</button>
                <button id="toggle-sound" class="btn btn-sound">ЁЯФК рдзреНрд╡рдирд┐</button>
            </div>
        </div>

        <div class="chess-board" id="chess-board">
            <!-- рдмреЛрд░реНрдб JavaScript рд╕реЗ рдмрдиреЗрдЧрд╛ -->
        </div>

        <div class="stats">
            <div class="stat">
                <span class="stat-label">рдЪрд╛рд▓реЗрдВ:</span>
                <span id="move-count" class="stat-value">0</span>
            </div>
            <div class="stat">
                <span class="stat-label">рд╕рдордп:</span>
                <span id="game-time" class="stat-value">00:00</span>
            </div>
            <div class="stat">
                <span class="stat-label">рд╢реНрд╡реЗрдд рдХрдмреНрдЬреЗ:</span>
                <span id="white-captures" class="stat-value">0</span>
            </div>
            <div class="stat">
                <span class="stat-label">рдХрд╛рд▓реЗ рдХрдмреНрдЬреЗ:</span>
                <span id="black-captures" class="stat-value">0</span>
            </div>
        </div>

        <div class="instructions">
            <h3>рдирд┐рд░реНрджреЗрд╢:</h3>
            <ul>
                <li>рдореЛрд╣рд░реЗ рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░рдХреЗ рдЪреБрдиреЗрдВ рдФрд░ рдлрд┐рд░ рдЧрдВрддрд╡реНрдп рд╡рд░реНрдЧ рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВ</li>
                <li>рдпрд╣ рдРрдк рдкреВрд░реА рддрд░рд╣ рдСрдлрд▓рд╛рдЗрди рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ</li>
                <li>рдлреЛрди рдкрд░ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП: тЛо рдореЗрдиреВ > "рдРрдк рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░реЗрдВ"</li>
            </ul>
        </div>

        <div class="pwa-install" id="install-prompt" style="display: none;">
            <p>рдЗрд╕ рдРрдк рдХреЛ рдЕрдкрдиреЗ рдлреЛрди рдкрд░ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░реЗрдВ!</p>
            <button id="install-btn" class="btn btn-install">рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░реЗрдВ</button>
            <button id="cancel-install" class="btn btn-cancel">рдмрд╛рдж рдореЗрдВ</button>
        </div>

        <footer>
            <p>PWA рд╢рддрд░рдВрдЬ рдЧреЗрдо - рдЪрд╛рдЗрдирд╛ рддрдХрдиреАрдХ рд╕реЗ рд╡рд┐рдХрд╕рд┐рдд</p>
            <button id="offline-test" class="btn btn-small">рдСрдлрд▓рд╛рдЗрди рдЯреЗрд╕реНрдЯ</button>
        </footer>
    </div>

    <!-- рд╢рддрд░рдВрдЬ рдХреЗ рдореЛрд╣рд░реЛрдВ рдХреЗ SVG -->
    <svg style="display: none;">
        <defs>
            <!-- рдпрд╣рд╛рдБ SVG рдЖрдЗрдХрдиреНрд╕ рд╣реЛрдВрдЧреЗ рдЬреЛ JavaScript рдореЗрдВ рдЙрдкрдпреЛрдЧ рд╣реЛрдВрдЧреЗ -->
        </defs>
    </svg>

    <script src="app.js"></script>
    <script>
        // PWA рдЗрдВрд╕реНрдЯреЙрд▓ рдкреНрд░реЙрдореНрдкреНрдЯ
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('service-worker.js')
                    .then(reg => console.log('Service Worker рдкрдВрдЬреАрдХреГрдд:', reg))
                    .catch(err => console.log('Service Worker рддреНрд░реБрдЯрд┐:', err));
            });
        }

        // рдРрдк рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░рдиреЗ рдХрд╛ рдкреНрд░реЙрдореНрдкреНрдЯ
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            document.getElementById('install-prompt').style.display = 'block';
        });

        document.getElementById('install-btn').addEventListener('click', () => {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                deferredPrompt.userChoice.then(choice => {
                    if (choice.outcome === 'accepted') {
                        console.log('рдРрдк рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд┐рдпрд╛ рдЧрдпрд╛');
                    }
                    deferredPrompt = null;
                    document.getElementById('install-prompt').style.display = 'none';
                });
            }
        });

        document.getElementById('cancel-install').addEventListener('click', () => {
            document.getElementById('install-prompt').style.display = 'none';
        });
    </script>
</body>
  </html>
